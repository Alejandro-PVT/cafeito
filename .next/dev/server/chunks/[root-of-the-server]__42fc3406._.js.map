{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 118, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Golux/Downloads/CafeITOax/lib/db.ts"],"sourcesContent":["import mysql from \"mysql2/promise\"\n\nconst pool = mysql.createPool({\n  host: process.env.DB_HOST || \"localhost\",\n  user: process.env.DB_USER || \"root\",\n  password: process.env.DB_PASSWORD || \"\",\n  database: process.env.DB_NAME || \"cafeito_db\",\n  waitForConnections: true,\n  connectionLimit: 10,\n  queueLimit: 0,\n})\n\nexport async function query(sql: string, values?: any[]) {\n  const connection = await pool.getConnection()\n  try {\n    const [results] = await connection.execute(sql, values || [])\n    return results\n  } finally {\n    connection.release()\n  }\n}\n\nexport default pool\n"],"names":[],"mappings":";;;;;;AAAA;;AAEA,MAAM,OAAO,8IAAK,CAAC,UAAU,CAAC;IAC5B,MAAM,QAAQ,GAAG,CAAC,OAAO,IAAI;IAC7B,MAAM,QAAQ,GAAG,CAAC,OAAO,IAAI;IAC7B,UAAU,QAAQ,GAAG,CAAC,WAAW,IAAI;IACrC,UAAU,QAAQ,GAAG,CAAC,OAAO,IAAI;IACjC,oBAAoB;IACpB,iBAAiB;IACjB,YAAY;AACd;AAEO,eAAe,MAAM,GAAW,EAAE,MAAc;IACrD,MAAM,aAAa,MAAM,KAAK,aAAa;IAC3C,IAAI;QACF,MAAM,CAAC,QAAQ,GAAG,MAAM,WAAW,OAAO,CAAC,KAAK,UAAU,EAAE;QAC5D,OAAO;IACT,SAAU;QACR,WAAW,OAAO;IACpB;AACF;uCAEe"}},
    {"offset": {"line": 149, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Golux/Downloads/CafeITOax/app/api/products/%5Bid%5D/route.ts"],"sourcesContent":["import { type NextRequest, NextResponse } from \"next/server\"\nimport { query } from \"@/lib/db\"\n\nexport async function GET(request: NextRequest, { params }: { params: Promise<{ id: string }> }) {\n  try {\n    const { id } = await params\n    console.log(\"[v0] GET producto ID:\", id)\n\n    const results: any[] = await query(\"SELECT * FROM products WHERE id = ? AND is_active = TRUE\", [id])\n\n    if (results.length === 0) {\n      return NextResponse.json({ error: \"Producto no encontrado\" }, { status: 404 })\n    }\n\n    return NextResponse.json(results[0])\n  } catch (error) {\n    console.error(\"[v0] Error obteniendo producto:\", error)\n    return NextResponse.json({ error: \"Error obteniendo producto\" }, { status: 500 })\n  }\n}\n\nexport async function PUT(request: NextRequest, { params }: { params: Promise<{ id: string }> }) {\n  try {\n    const { id } = await params\n    console.log(\"[v0] PUT producto ID:\", id)\n\n    const adminId = request.cookies.get(\"auth_token\")?.value\n    if (!adminId) {\n      return NextResponse.json({ error: \"No autorizado\" }, { status: 401 })\n    }\n\n    const body = await request.json()\n    console.log(\"[v0] Body recibido:\", body)\n\n    const { name, description, category_id, price, image_url, stock, is_active } = body\n\n    const stockValue = stock !== undefined ? Number(stock) : 0\n    const isActiveValue = is_active !== undefined ? (is_active ? 1 : 0) : 1\n    const priceValue = Number(price)\n\n    console.log(\"[v0] Valores a actualizar:\", {\n      name,\n      description,\n      category_id,\n      priceValue,\n      image_url,\n      stockValue,\n      isActiveValue,\n      id,\n    })\n\n    await query(\n      `UPDATE products SET name = ?, description = ?, category_id = ?, \n       price = ?, image_url = ?, stock = ?, is_active = ? WHERE id = ?`,\n      [name, description, category_id, priceValue, image_url, stockValue, isActiveValue, id],\n    )\n\n    console.log(\"[v0] Producto actualizado exitosamente\")\n    return NextResponse.json({ message: \"Producto actualizado\" })\n  } catch (error) {\n    console.error(\"[v0] Error actualizando producto:\", error)\n    return NextResponse.json({ error: \"Error actualizando producto\" }, { status: 500 })\n  }\n}\n\nexport async function DELETE(request: NextRequest, { params }: { params: Promise<{ id: string }> }) {\n  try {\n    const { id } = await params\n    console.log(\"[v0] DELETE producto ID:\", id)\n\n    const adminId = request.cookies.get(\"auth_token\")?.value\n    if (!adminId) {\n      return NextResponse.json({ error: \"No autorizado\" }, { status: 401 })\n    }\n\n    await query(\"UPDATE products SET is_active = FALSE WHERE id = ?\", [id])\n\n    console.log(\"[v0] Producto eliminado exitosamente\")\n    return NextResponse.json({ message: \"Producto eliminado\" })\n  } catch (error) {\n    console.error(\"[v0] Error eliminando producto:\", error)\n    return NextResponse.json({ error: \"Error eliminando producto\" }, { status: 500 })\n  }\n}\n"],"names":[],"mappings":";;;;;;;;AAAA;AACA;;;AAEO,eAAe,IAAI,OAAoB,EAAE,EAAE,MAAM,EAAuC;IAC7F,IAAI;QACF,MAAM,EAAE,EAAE,EAAE,GAAG,MAAM;QACrB,QAAQ,GAAG,CAAC,yBAAyB;QAErC,MAAM,UAAiB,MAAM,IAAA,oHAAK,EAAC,4DAA4D;YAAC;SAAG;QAEnG,IAAI,QAAQ,MAAM,KAAK,GAAG;YACxB,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAyB,GAAG;gBAAE,QAAQ;YAAI;QAC9E;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE;IACrC,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,mCAAmC;QACjD,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAA4B,GAAG;YAAE,QAAQ;QAAI;IACjF;AACF;AAEO,eAAe,IAAI,OAAoB,EAAE,EAAE,MAAM,EAAuC;IAC7F,IAAI;QACF,MAAM,EAAE,EAAE,EAAE,GAAG,MAAM;QACrB,QAAQ,GAAG,CAAC,yBAAyB;QAErC,MAAM,UAAU,QAAQ,OAAO,CAAC,GAAG,CAAC,eAAe;QACnD,IAAI,CAAC,SAAS;YACZ,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAgB,GAAG;gBAAE,QAAQ;YAAI;QACrE;QAEA,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,QAAQ,GAAG,CAAC,uBAAuB;QAEnC,MAAM,EAAE,IAAI,EAAE,WAAW,EAAE,WAAW,EAAE,KAAK,EAAE,SAAS,EAAE,KAAK,EAAE,SAAS,EAAE,GAAG;QAE/E,MAAM,aAAa,UAAU,YAAY,OAAO,SAAS;QACzD,MAAM,gBAAgB,cAAc,YAAa,YAAY,IAAI,IAAK;QACtE,MAAM,aAAa,OAAO;QAE1B,QAAQ,GAAG,CAAC,8BAA8B;YACxC;YACA;YACA;YACA;YACA;YACA;YACA;YACA;QACF;QAEA,MAAM,IAAA,oHAAK,EACT,CAAC;sEAC+D,CAAC,EACjE;YAAC;YAAM;YAAa;YAAa;YAAY;YAAW;YAAY;YAAe;SAAG;QAGxF,QAAQ,GAAG,CAAC;QACZ,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,SAAS;QAAuB;IAC7D,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,qCAAqC;QACnD,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAA8B,GAAG;YAAE,QAAQ;QAAI;IACnF;AACF;AAEO,eAAe,OAAO,OAAoB,EAAE,EAAE,MAAM,EAAuC;IAChG,IAAI;QACF,MAAM,EAAE,EAAE,EAAE,GAAG,MAAM;QACrB,QAAQ,GAAG,CAAC,4BAA4B;QAExC,MAAM,UAAU,QAAQ,OAAO,CAAC,GAAG,CAAC,eAAe;QACnD,IAAI,CAAC,SAAS;YACZ,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAgB,GAAG;gBAAE,QAAQ;YAAI;QACrE;QAEA,MAAM,IAAA,oHAAK,EAAC,sDAAsD;YAAC;SAAG;QAEtE,QAAQ,GAAG,CAAC;QACZ,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,SAAS;QAAqB;IAC3D,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,mCAAmC;QACjD,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAA4B,GAAG;YAAE,QAAQ;QAAI;IACjF;AACF"}}]
}