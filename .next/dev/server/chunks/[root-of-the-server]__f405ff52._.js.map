{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 118, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Golux/Downloads/CafeITOax/lib/db.ts"],"sourcesContent":["import mysql from \"mysql2/promise\"\n\nconst pool = mysql.createPool({\n  host: process.env.DB_HOST || \"localhost\",\n  user: process.env.DB_USER || \"root\",\n  password: process.env.DB_PASSWORD || \"\",\n  database: process.env.DB_NAME || \"cafeito_db\",\n  waitForConnections: true,\n  connectionLimit: 10,\n  queueLimit: 0,\n})\n\nexport async function query(sql: string, values?: any[]) {\n  const connection = await pool.getConnection()\n  try {\n    const [results] = await connection.execute(sql, values || [])\n    return results\n  } finally {\n    connection.release()\n  }\n}\n\nexport default pool\n"],"names":[],"mappings":";;;;;;AAAA;;AAEA,MAAM,OAAO,8IAAK,CAAC,UAAU,CAAC;IAC5B,MAAM,QAAQ,GAAG,CAAC,OAAO,IAAI;IAC7B,MAAM,QAAQ,GAAG,CAAC,OAAO,IAAI;IAC7B,UAAU,QAAQ,GAAG,CAAC,WAAW,IAAI;IACrC,UAAU,QAAQ,GAAG,CAAC,OAAO,IAAI;IACjC,oBAAoB;IACpB,iBAAiB;IACjB,YAAY;AACd;AAEO,eAAe,MAAM,GAAW,EAAE,MAAc;IACrD,MAAM,aAAa,MAAM,KAAK,aAAa;IAC3C,IAAI;QACF,MAAM,CAAC,QAAQ,GAAG,MAAM,WAAW,OAAO,CAAC,KAAK,UAAU,EAAE;QAC5D,OAAO;IACT,SAAU;QACR,WAAW,OAAO;IACpB;AACF;uCAEe"}},
    {"offset": {"line": 149, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Golux/Downloads/CafeITOax/lib/auth.ts"],"sourcesContent":["import crypto from \"crypto\"\n\nexport function hashPassword(password: string): string {\n  // Simple hash para desarrollo - usa PBKDF2\n  return crypto.pbkdf2Sync(password, \"cafeito-salt-key\", 1000, 64, \"sha512\").toString(\"hex\")\n}\n\nexport function verifyPassword(password: string, storedPassword: string): boolean {\n  return password === storedPassword\n}\n\nexport function generateToken(): string {\n  return crypto.randomBytes(32).toString(\"hex\")\n}\n"],"names":[],"mappings":";;;;;;;;AAAA;;AAEO,SAAS,aAAa,QAAgB;IAC3C,2CAA2C;IAC3C,OAAO,gHAAM,CAAC,UAAU,CAAC,UAAU,oBAAoB,MAAM,IAAI,UAAU,QAAQ,CAAC;AACtF;AAEO,SAAS,eAAe,QAAgB,EAAE,cAAsB;IACrE,OAAO,aAAa;AACtB;AAEO,SAAS;IACd,OAAO,gHAAM,CAAC,WAAW,CAAC,IAAI,QAAQ,CAAC;AACzC"}},
    {"offset": {"line": 173, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Golux/Downloads/CafeITOax/app/api/auth/login/route.ts"],"sourcesContent":["import { type NextRequest, NextResponse } from \"next/server\"\nimport { query } from \"@/lib/db\"\nimport { verifyPassword } from \"@/lib/auth\"\n\nexport async function POST(request: NextRequest) {\n  try {\n    const { username, password } = await request.json()\n\n    console.log(\"[v0] Login attempt:\", { username, password })\n\n    if (!username || !password) {\n      return NextResponse.json({ error: \"Usuario y contraseña requeridos\" }, { status: 400 })\n    }\n\n    const results: any[] = await query(\"SELECT * FROM users WHERE username = ? AND is_active = TRUE\", [username])\n\n    console.log(\"[v0] Database query results:\", results.length)\n\n    if (results.length === 0) {\n      return NextResponse.json({ error: \"Usuario no encontrado\" }, { status: 401 })\n    }\n\n    if (!verifyPassword(password, results[0].password)) {\n      return NextResponse.json({ error: \"Contraseña incorrecta\" }, { status: 401 })\n    }\n\n    const user = results[0]\n    const response = NextResponse.json({\n      id: user.id,\n      username: user.username,\n      name: user.name,\n      role: user.role,\n    })\n\n    response.cookies.set(\"auth_token\", user.id.toString(), {\n      httpOnly: true,\n      secure: process.env.NODE_ENV === \"production\",\n      sameSite: \"lax\",\n      maxAge: 60 * 60 * 24 * 7,\n    })\n\n    return response\n  } catch (error) {\n    console.error(\"Error en login:\", error)\n    return NextResponse.json({ error: \"Error en el servidor\" }, { status: 500 })\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AAEO,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,MAAM,EAAE,QAAQ,EAAE,QAAQ,EAAE,GAAG,MAAM,QAAQ,IAAI;QAEjD,QAAQ,GAAG,CAAC,uBAAuB;YAAE;YAAU;QAAS;QAExD,IAAI,CAAC,YAAY,CAAC,UAAU;YAC1B,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAkC,GAAG;gBAAE,QAAQ;YAAI;QACvF;QAEA,MAAM,UAAiB,MAAM,IAAA,oHAAK,EAAC,+DAA+D;YAAC;SAAS;QAE5G,QAAQ,GAAG,CAAC,gCAAgC,QAAQ,MAAM;QAE1D,IAAI,QAAQ,MAAM,KAAK,GAAG;YACxB,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAwB,GAAG;gBAAE,QAAQ;YAAI;QAC7E;QAEA,IAAI,CAAC,IAAA,+HAAc,EAAC,UAAU,OAAO,CAAC,EAAE,CAAC,QAAQ,GAAG;YAClD,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAwB,GAAG;gBAAE,QAAQ;YAAI;QAC7E;QAEA,MAAM,OAAO,OAAO,CAAC,EAAE;QACvB,MAAM,WAAW,gJAAY,CAAC,IAAI,CAAC;YACjC,IAAI,KAAK,EAAE;YACX,UAAU,KAAK,QAAQ;YACvB,MAAM,KAAK,IAAI;YACf,MAAM,KAAK,IAAI;QACjB;QAEA,SAAS,OAAO,CAAC,GAAG,CAAC,cAAc,KAAK,EAAE,CAAC,QAAQ,IAAI;YACrD,UAAU;YACV,QAAQ,oDAAyB;YACjC,UAAU;YACV,QAAQ,KAAK,KAAK,KAAK;QACzB;QAEA,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,mBAAmB;QACjC,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAuB,GAAG;YAAE,QAAQ;QAAI;IAC5E;AACF"}}]
}